<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>xthread Reply Coach</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
        </svg>
        <span>xthread</span>
      </div>
      <span class="version">v1.5.0</span>
    </div>

    <!-- Not authenticated view -->
    <div id="auth-view" class="view">
      <div class="auth-prompt">
        <h2>Reply Coach</h2>
        <p>Learn HOW to craft killer replies and grow your X following.</p>
        
        <div class="features">
          <div class="feature">
            <span class="feature-icon">ğŸ¯</span>
            <span>Strategic angles, not full replies</span>
          </div>
          <div class="feature">
            <span class="feature-icon">ğŸ“Š</span>
            <span>Post scoring (worth replying?)</span>
          </div>
          <div class="feature">
            <span class="feature-icon">ğŸª</span>
            <span>Hook starters to get you going</span>
          </div>
          <div class="feature">
            <span class="feature-icon">ğŸ“Œ</span>
            <span>Save posts for later</span>
          </div>
        </div>
        
        <div class="algorithm-tip">
          ğŸ’¡ Replies are weighted <strong>75x</strong> in X's algorithm
        </div>
        
        <button id="sign-in-btn" class="primary-btn">
          Sign in with xthread
        </button>
        
        <div class="token-section">
          <p class="token-instructions">After signing in, paste your token here:</p>
          <div class="token-input-row">
            <input type="password" id="token-input" placeholder="Paste token..." class="token-input" />
            <button id="token-submit-btn" class="token-submit-btn">â†’</button>
          </div>
        </div>
        
        <p class="note">Premium feature â€¢ <a href="https://xthread.io/pricing" target="_blank">Upgrade</a></p>
      </div>
    </div>

    <!-- Authenticated view -->
    <div id="main-view" class="view hidden">
      <div class="user-info">
        <div class="user-avatar" id="user-avatar">?</div>
        <div class="user-details">
          <div class="user-name" id="user-name">Loading...</div>
          <div class="user-plan" id="user-plan">Free</div>
        </div>
        <button id="sign-out-btn" class="icon-btn" title="Sign out">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
          </svg>
        </button>
      </div>
      
      <!-- Premium status -->
      <div id="premium-status" class="status-card premium">
        <span class="status-icon">ğŸ‘‘</span>
        <div class="status-text">
          <strong>Premium Active</strong>
          <span>Reply Coach enabled</span>
        </div>
      </div>
      
      <!-- Free status -->
      <div id="free-status" class="status-card free hidden">
        <span class="status-icon">ğŸ”’</span>
        <div class="status-text">
          <strong>Premium Required</strong>
          <span>Upgrade to use Reply Coach</span>
        </div>
        <a href="https://xthread.io/pricing" target="_blank" class="upgrade-link">Upgrade â†’</a>
      </div>
      
      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" data-tab="coach">
          <span class="tab-icon">ğŸ¯</span>
          <span class="tab-text">Coach</span>
        </button>
        <button class="tab" data-tab="notifications">
          <span class="tab-icon">ğŸ””</span>
          <span class="tab-text">Feed</span>
          <span class="tab-badge notification-badge" id="notifications-badge"></span>
        </button>
        <button class="tab" data-tab="stats">
          <span class="tab-icon">ğŸ“ˆ</span>
          <span class="tab-text">Stats</span>
        </button>
        <button class="tab" data-tab="watchlist">
          <span class="tab-icon">ğŸ‘</span>
          <span class="tab-text">Watch</span>
          <span class="tab-badge" id="watchlist-badge"></span>
        </button>
        <button class="tab" data-tab="saved">
          <span class="tab-icon">ğŸ“Œ</span>
          <span class="tab-text">Saved</span>
          <span class="tab-badge" id="saved-badge"></span>
        </button>
      </div>
      
      <!-- Coach Tab Content -->
      <div class="tab-content active" id="tab-coach">
        <!-- Stats -->
        <div class="stats" id="stats-section">
          <div class="stat">
            <div class="stat-value" id="coaching-today">0</div>
            <div class="stat-label">Coached today</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="saved-count">0</div>
            <div class="stat-label">Saved posts</div>
          </div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions">
          <h3>How to use</h3>
          <ol>
            <li>Browse X normally</li>
            <li>Click the purple <strong>Coach</strong> button on any post</li>
            <li>Review strategic angles and hook starters</li>
            <li>Write YOUR reply using the coaching</li>
          </ol>
          <div class="tip">
            <strong>Pro tip:</strong> Focus on high-score posts (&gt;7) for maximum impact
          </div>
        </div>
      </div>
      
      <!-- Notifications Tab Content -->
      <div class="tab-content" id="tab-notifications">
        <div class="notifications-header">
          <p class="notifications-subtitle">Recent posts from your watchlist</p>
          <button id="mark-read-btn" class="text-btn">Mark all read</button>
        </div>
        
        <div id="notifications-list" class="notifications-list">
          <!-- Populated by JS -->
        </div>
        
        <div id="notifications-empty" class="notifications-empty">
          <div class="empty-icon">ğŸ””</div>
          <div class="empty-title">No posts yet</div>
          <div class="empty-desc">
            Posts from accounts you're watching will appear here as you browse X.
          </div>
        </div>
      </div>
      
      <!-- Stats Tab Content -->
      <div class="tab-content" id="tab-stats">
        <div class="stats-overview">
          <div class="stat-card">
            <div class="stat-card-value" id="total-replies">0</div>
            <div class="stat-card-label">Replies Tracked</div>
          </div>
          <div class="stat-card highlight">
            <div class="stat-card-value" id="conversion-rate">0%</div>
            <div class="stat-card-label">Conversion Rate</div>
          </div>
        </div>
        
        <div class="stats-header">
          <h4>Reply History</h4>
          <button id="clear-replies-btn" class="text-btn">Clear all</button>
        </div>
        
        <div id="reply-history-list" class="reply-history-list">
          <!-- Populated by JS -->
        </div>
        
        <div id="reply-history-empty" class="reply-history-empty">
          <div class="empty-icon">ğŸ“ˆ</div>
          <div class="empty-title">No replies tracked</div>
          <div class="empty-desc">
            Your replies will be tracked automatically when you reply to posts. Use this to see which replies lead to follows!
          </div>
        </div>
        
        <div class="stats-tip">
          ğŸ’¡ <strong>Tip:</strong> After replying, check if the author followed you back and mark it here to track your conversion rate!
        </div>
      </div>
      
      <!-- Watchlist Tab Content -->
      <div class="tab-content" id="tab-watchlist">
        <div class="watchlist-header">
          <p class="watchlist-subtitle">Track your favorite creators</p>
        </div>
        
        <div id="watchlist-list" class="watchlist-list">
          <!-- Populated by JS -->
        </div>
        
        <div id="watchlist-empty" class="watchlist-empty">
          <div class="empty-icon">ğŸ‘</div>
          <div class="empty-title">No accounts yet</div>
          <div class="empty-desc">
            Add accounts to your watchlist by clicking the <strong>ğŸ‘ Watch</strong> button on their profile.
          </div>
        </div>
      </div>
      
      <!-- Saved Posts Tab Content -->
      <div class="tab-content" id="tab-saved">
        <div class="saved-section">
          <div class="saved-header">
            <span class="saved-subtitle">Posts you've bookmarked</span>
            <button id="clear-saved-btn" class="text-btn">Clear all</button>
          </div>
          <div id="saved-posts-list" class="saved-posts-list">
            <!-- Populated by JS -->
          </div>
          <div id="no-saved" class="no-saved">
            No saved posts yet. Click the bookmark icon on any post to save it.
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <a href="https://xthread.io" target="_blank">xthread.io</a>
      <span>â€¢</span>
      <a href="https://xthread.io/help" target="_blank">Help</a>
    </div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>
